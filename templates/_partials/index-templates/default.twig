{% from '_macros/lib.twig' import img %}

{% if criteria.limit is not defined %}
    {% set criteria = criteria|merge({limit: theme.entriesPerIndexPage}) %}
{% endif %}


{% paginate craft.entries(criteria) as pageInfo, entries %}

<article class="space-y-6">
    {% for entry in entries %}
        <a class="block flex space-x-4 !no-underline border border-border bg-white hover:bg-gray-200 transition-colors shadow-lg" href="{{ entry.url }}">

            <div class="flex-shrink-0">
                {% set image = entry.featuredImage|one %}
                {% if image %}
                    {{ img(image, theme.cardletImageTransform) }}
                {% endif %}
            </div>
            <div class="flex flex-col justify-between py-2 ">
                <div class="h-full">
                    {% if entry.teaser %}
                        <div class="text-base mb-2">
                            {{ entry.teaser }}
                        </div>
                    {% endif %}
                    <div class="text-3xl">
                        {{ entry.title }}
                    </div>

                    {% include "_sections/#{entry.section.handle}/card_content.twig" ignore missing %}
                </div>
                <div>
                    {% include "_sections/#{entry.section.handle}/card_bottom_content.twig" ignore missing %}
                </div>
            </div>
        </a>
    {% endfor %}
</article>

{% if pageInfo.totalPages > 1 %}
    {% include '_layouts/partials/pagination.twig' %}
{% endif %}



